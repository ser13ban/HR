# Feature Plan: Home Page Profile Navigation and Co-workers Grid

## Description
Update the home page to include a profile navigation button for the current user at the top and add a co-workers grid component displaying all employees with individual "See Profile" buttons. This will enable users to navigate to their own profile and view co-worker profiles as specified in the product requirements.

## Backend Changes (.NET API)

### Controllers
- **File**: `HrAPI/HrAPI/Controllers/EmployeeController.cs` (New)
  - GET `/api/employees` endpoint to retrieve all employees with basic profile information
  - GET `/api/employees/{id}` endpoint to retrieve specific employee profile
  - Apply role-based filtering to return appropriate data based on current user's permissions
  - Include fields: Id, FirstName, LastName, FullName, Department, Team, Position, ProfilePictureUrl, Role
  - Exclude sensitive data like email, phone number for co-worker access

### Authorization Attributes
- **File**: `HrAPI/HrAPI/Controllers/EmployeeController.cs`
  - Apply `[Authorize]` attribute to ensure only authenticated users can access employee data
  - Implement role-based data filtering within controller methods

### DTOs
- **New File**: `HrAPI/HrAPI/DTOs/EmployeeListDto.cs`
  - Properties: Id, FirstName, LastName, FullName, Department, Team, Position, ProfilePictureUrl, Role
  - Used for co-workers grid display with non-sensitive information

- **New File**: `HrAPI/HrAPI/DTOs/EmployeeProfileDto.cs`
  - Properties: All employee fields with role-based visibility
  - Used for detailed profile view with appropriate data based on viewer permissions

## Frontend Changes (Angular)

### Services
- **File**: `hr-app/src/app/core/services/employee.service.ts` (New)
  - `getAllEmployees()`: HTTP GET to retrieve all employees for co-workers grid
  - `getEmployeeById(id: number)`: HTTP GET to retrieve specific employee profile
  - Error handling for API failures
  - Return type-safe observables with proper interfaces

### Models
- **File**: `hr-app/src/app/core/models/employee.models.ts` (New)
  - `EmployeeListItem` interface matching EmployeeListDto
  - `EmployeeProfile` interface matching EmployeeProfileDto
  - Export interfaces for use across components

### Components
- **File**: `hr-app/src/app/features/profile/profile.component.ts` (New)
  - Standalone component for employee profile display
  - Accept employee ID as route parameter
  - Load employee data using EmployeeService
  - Display profile information with role-based visibility
  - Handle loading states and error scenarios

- **File**: `hr-app/src/app/features/profile/profile.component.html` (New)
  - Template for profile display
  - Conditional rendering based on user permissions
  - Profile information layout with proper styling

- **File**: `hr-app/src/app/features/profile/profile.component.sass` (New)
  - Styling for profile component
  - Responsive design for profile layout

- **File**: `hr-app/src/app/shared/components/co-workers-grid/co-workers-grid.component.ts` (New)
  - Standalone component displaying grid of all co-workers
  - Load employees using EmployeeService
  - Each grid item shows: name, department, team, position, profile picture
  - "See Profile" button for each employee navigating to profile route
  - Handle loading states and empty states

- **File**: `hr-app/src/app/shared/components/co-workers-grid/co-workers-grid.component.html` (New)
  - Grid template using CSS Grid or Flexbox
  - Employee card layout with profile information
  - "See Profile" button with proper routing

- **File**: `hr-app/src/app/shared/components/co-workers-grid/co-workers-grid.component.sass` (New)
  - Grid styling with responsive design
  - Card styling for employee items
  - Button styling consistent with app design

### Updated Components
- **File**: `hr-app/src/app/features/home/home.component.ts`
  - Add Router injection for navigation
  - Add `navigateToProfile()` method to navigate to current user's profile
  - Import and use CoWorkersGridComponent

- **File**: `hr-app/src/app/features/home/home.component.html`
  - Add profile navigation button at the top of the user info section
  - Add co-workers grid component after the existing features section
  - Update layout to accommodate new components

- **File**: `hr-app/src/app/features/home/home.component.sass`
  - Add styling for profile navigation button
  - Update layout styles to accommodate grid component

### Routing
- **File**: `hr-app/src/app/app.routes.ts`
  - Add route: `{ path: 'profile/:id', canActivate: [AuthGuard], loadComponent: () => import('./features/profile/profile.component').then(m => m.ProfileComponent) }`
  - Add route: `{ path: 'profile', canActivate: [AuthGuard], redirectTo: '/profile/' + currentUserId }` (for current user profile)

### Shared Directory Structure
- **New Directory**: `hr-app/src/app/shared/components/`
  - Create shared components directory for reusable components like co-workers-grid

## Implementation Algorithm

### Profile Navigation Flow
1. User clicks "View My Profile" button on home page
2. Navigate to `/profile/{currentUserId}` route using Angular Router
3. Profile component loads with current user's ID from route parameters
4. Component calls EmployeeService.getEmployeeById() with current user ID
5. Display full profile information since user is viewing their own profile

### Co-workers Grid Flow
1. Home component loads and initializes CoWorkersGridComponent
2. CoWorkersGridComponent calls EmployeeService.getAllEmployees()
3. Backend returns filtered employee list excluding sensitive information
4. Component renders grid with employee cards showing basic information
5. Each card displays "See Profile" button
6. User clicks "See Profile" button for specific employee
7. Navigate to `/profile/{employeeId}` route
8. Profile component loads with selected employee's ID
9. Display appropriate information based on viewer's role and relationship to profile owner

### Role-Based Data Display
1. Backend EmployeeController checks current user's role and relationship to requested profile
2. If viewing own profile: return all profile data
3. If manager viewing employee profile: return all profile data
4. If co-worker viewing profile: return only non-sensitive data (exclude email, phone, etc.)
5. Frontend profile component renders available data fields dynamically

### Error Handling
- Handle API failures with user-friendly error messages
- Display loading states during data fetching
- Handle empty states when no co-workers exist
- Graceful handling of unauthorized access to profiles

### Performance Considerations
- Implement proper loading states for better UX
- Consider pagination for large employee lists (future enhancement)
- Use Angular's OnPush change detection strategy for grid component
- Optimize API calls by caching employee list data

## Security Considerations
- All API endpoints require authentication via JWT token
- Role-based data filtering implemented on backend
- Frontend components respect role-based visibility rules
- No sensitive data exposed in co-workers grid or unauthorized profile views
